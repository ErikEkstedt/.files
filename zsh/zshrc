# vim: ft=zsh
# some useful options (man zshoptions)

# Options
setopt autocd extendedglob
setopt interactive_comments
setopt RM_STAR_WAIT  # if you do a 'rm *', Zsh will give you a sanity check!
unsetopt BEEP
stty stop undef		# Disable ctrl-s to freeze terminal.

# Completions
autoload -Uz compinit
zstyle ':completion:*' menu select
zmodload zsh/complist
compinit
_comp_options+=(globdots)		# Include hidden files.

# Prompt
source ~/.files/zsh/alias.zsh  
source ~/.files/zsh/prompt.zsh
source ~/.files/zsh/plugin-functions.zsh # functions for handling zsh plugins
source ~/.files/zsh/less-colors.zsh   # coloring for less pager
source ~/.files/zsh/ls-commands.zsh  # use ls or lcd + their aliases
source ~/.files/zsh/functions.zsh  # random functions
source ~/.files/zsh/vim-mode.zsh  # vim-mode, keytimeout & cursor styles

if [[ -f ~/.fzf.zsh  ]]; then
    source ~/.fzf.zsh
    source ~/.files/fzf/fzf_zsh_settings.zsh
fi

# TMUX  {{{
if [ "$TMUX" = "" ]; then
  if tmux has-session -t=Terminal 2> /dev/null; then
    tmux attach -t Terminal
  else
    tmux new-session -s Terminal
  fi
fi # }}}

# Plugins
export ZDOTDIR=$HOME/.config/zsh
zsh_add_plugin "zsh-users/zsh-autosuggestions"
zsh_add_plugin "zsh-users/zsh-syntax-highlighting"

# History
HISTFILE=$ZDOTDIR/.zsh_history
HISTSIZE=1000000
SAVEHIST=1000000

# Exports
export DOTFILES=$HOME/.files
export COLORTERM="truecolor"
export TERM="screen-256color"
export EDITOR='nvim'
export BROWSER="brave-browser"
export MANPAGER='nvim +Man!'
export PATH="$HOME/gems/bin:$PATH"  # Install Ruby Gems to ~/gems
export PATH="$HOME/go/bin:$PATH"                                   

# Slow startup time... do I need this?
# export NVM_DIR="$HOME/.nvm"                                        # NVM
# [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"                   # This loads nvm
# [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion" # This loads nvm bash_completion
if [ -e /home/erik/.nix-profile/etc/profile.d/nix.sh ]; then . /home/erik/.nix-profile/etc/profile.d/nix.sh; fi # added by Nix installer

# Slow LOADING TIME :( but I do require conda
# >>> conda initialize >>> {{{
# Conda produces its own prompt prefix to show the current active environment
# remove by running:
# conda config --set changeps1 False
__conda_setup="$( $HOME'/miniconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
fi
unset __conda_setup
# <<< conda initialize <<< }}}
